<!DOCTYPE html>
<html
	lang="en"
	class="light-style layout-menu-fixed"
	dir="ltr"
	data-theme="theme-default"
	data-assets-path="assets/"
	data-template="vertical-menu-template-free"
	>
	<head>

		<link id="core" rel="stylesheet" href="" class="template-customizer-core-css" />
		<link id="theme" rel="stylesheet" href="" class="template-customizer-theme-css" />
		<script>
			var pn = localStorage.getItem("em")
			var cid  = localStorage.getItem("nclz")
		</script>
		<script src="assets/vendor/libs/jquery/jquery.js"></script>

		<link rel="stylesheet" href="js/MCDatepicker-master/dist/mc-calendar.min.css">
	
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
			/>
		<title>Students - English RE</title>
		<meta name="description" content="" />
		<!-- Favicon -->
		<link rel="icon" type="image/x-icon" href="images/icon.png" />
		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
			rel="stylesheet"
			/>
		<!-- Icons. Uncomment required icon fonts -->
		<link rel="stylesheet" href="assets/vendor/fonts/boxicons.css" />
		<script src="js/pdf.js"></script>
		<script src="js/jspdf.plugin.autotable.js"></script>
		<!-- Core CSS -->
		<script src="js/sweetalert2@11.js"></script>
		<link rel="stylesheet" href="" id="swd">
		<script>
			if(localStorage.getItem("theme")=="dark"){
							
							document.getElementById("core").href = "assets/vendor/css/core-dark.css"
								document.getElementById("theme").href = "assets/vendor/css/theme-default-dark.css"
								document.getElementById("swd").href = "assets/css/dark.css"
						} else{
							document.getElementById("core").href = "assets/vendor/css/core.css"
								document.getElementById("theme").href = "assets/vendor/css/theme-default.css"
						}
		</script>
		<style>
			.section::-webkit-scrollbar {
			width: 20px;
			}
			.section::-webkit-scrollbar-track {
			background-color: #e4e4e4;
			border-radius: 100px;
			}
			.section::-webkit-scrollbar-thumb {
			border-radius: 100px;
			border: 6px solid rgba(0, 0, 0, 0.18);
			border-left: 0;
			border-right: 0;
			background-color: #8070d4;
			}
			.hellocen{ align-self: center!important;align-items: center!important;align-content: center!important; text-align: center!important;
			}
            .margin-r-5{
                margin-right: 5px;
            }
		</style>
		<link rel="stylesheet" href="assets/css/demo.css" />
		<!-- Vendors CSS -->
		<link rel="stylesheet" href="assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
		<!-- Page CSS -->
		<!-- Helpers -->
		<script src="assets/vendor/js/helpers.js"></script>
		<!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
		<!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
		<script src="assets/js/config.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/8.2.8/firebase-app.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/8.2.8/firebase-auth.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/8.2.8/firebase-database.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="/admin/config.js"></script>

	</head>
	<style>
		.w3-green,.w3-hover-green:hover{color:#fff!important;background-color:#4CAF50!important}
	</style>
	<body>
		<!-- Layout wrapper -->
		<div class="layout-wrapper layout-content-navbar">
		<div class="layout-container">
			<!-- Menu -->
			<aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
				<div class="app-brand demo">
					<a href="/" class="app-brand-link">
					<span class="app-brand-logo demo">
					<img src="images/LMS-Logo.png" width="10%" alt="English-RE-Logo">
					</span>
					</a>
					<a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
					<i class="bx bx-chevron-left bx-sm align-middle"></i>
					</a>
				</div>
				<div class="menu-inner-shadow"></div>
				<ul class="menu-inner py-1">
					<!-- Dashboard -->
					<li class="menu-item">
						<a href="/" class="menu-link">
							<i class="menu-icon tf-icons bx bx-home-circle"></i>
							<div data-i18n="Dashboard">Dashboard</div>
						</a>
					</li>
					<!-- Classes -->
					<li class="menu-item">
						<a href="javascript:void(0);" class="menu-link menu-toggle">
							<i class="menu-icon tf-icons bx bx-chalkboard"></i>
							<div data-i18n="Layouts">Classes</div>
						</a>
						<ul id="ulclz" class="menu-sub" style="cursor: pointer;">
						</ul>
					</li>
					<!-- Class Settings -->
					<li class="menu-item">
						<a href="class-settings" class="menu-link">
							<i class="menu-icon tf-icons bx bx-cog"></i>
							<div data-i18n="Class Settings">Class Settings</div>
						</a>
					</li>
					<!-- Exams -->
					<li class="menu-item">
						<a href="exmain" class="menu-link">
							<i class="menu-icon tf-icons bx bx-stopwatch"></i>
							<div data-i18n="Exams">Exams</div>
						</a>
					</li>
					<!-- Bank Payments -->
					<li class="menu-item">
						<a href="bank-payments" class="menu-link">
							<i class="menu-icon tf-icons bx bx-credit-card"></i>
							<div data-i18n="Bank Payments">Bank Payments</div>
						</a>
					</li>
					<!-- Coupens -->
					<!--<li class="menu-item">
						<a href="coupens" class="menu-link">
							<i class="menu-icon tf-icon bx bxs-coupon"></i>
							<div data-i18n="Coupens">Coupens</div>
						</a>
					</li>-->
					<!-- Reports -->
					<li class="menu-item">
						<a href="javascript:void(0);" class="menu-link menu-toggle">
							<i class="menu-icon tf-icons bx bxs-report"></i>
							<div data-i18n="Reports">Reports</div>
						</a>
						<ul class="menu-sub">
							<li class="menu-item">
								<a href="meeting-reports" class="menu-link">
									<div data-i18n="Meeting Reports">Meeting Reports</div>
								</a>
							</li>
							<li class="menu-item">
								<a href="payment-reports" class="menu-link">
									<div data-i18n="Payment Reports">Payment Reports</div>
								</a>
							</li>
						</ul>
					</li>
					<!-- Students -->
					<li class="menu-item active open">
						<a href="javascript:void(0);" class="menu-link menu-toggle">
							<i class="menu-icon tf-icons bx bxs-report"></i>
							<div data-i18n="Reports">Students</div>
						</a>
						<ul class="menu-sub">
							<li class="menu-item active">
								<a href="students" class="menu-link">
									<div data-i18n="Students">All Students</div>
								</a>
							</li>
							<li class="menu-item">
								<a href="filter-students" class="menu-link">
									<div data-i18n="Students">Filter Students</div>
								</a>
							</li>
							<li class="menu-item">
								<a href="st-change-password.html" class="menu-link">
									<div data-i18n="Students">Change Password</div>
								</a>
							</li>
						</ul>
					</li>
					<!-- Settings -->
					<li class="menu-header small text-uppercase">
						<span class="menu-header-text">Settings</span>
					</li>
					<li class="menu-item">
						<a href="edit-profile" class="menu-link">
							<i class="menu-icon tf-icons bx bxs-user"></i>
							<div data-i18n="Edit Profile">Edit Profile</div>
						</a>
					</li>
					<li class="menu-item">
						<a href="account-settings" class="menu-link">
							<i class="menu-icon tf-icons bx bxs-wrench"></i>
							<div data-i18n="Account Settings">Account Settings</div>
						</a>
					</li>
					</li>
					<!-- Support -->
					<li class="menu-header small text-uppercase"><span class="menu-header-text">Support</span></li>
					<li class="menu-item">
						<a href="#" class="menu-link">
							<i class="menu-icon tf-icons bx bx-file"></i>
							<div data-i18n="Documentation">Documentation</div>
						</a>
					</li>
					<li class="menu-item">
						<a href="#" class="menu-link">
							<i class="menu-icon tf-icons bx bx-support"></i>
							<div data-i18n="Support">Support Center</div>
						</a>
					</li>
				</ul>
			</aside>
			<!-- / Menu -->
			<!-- Layout container -->
			<div class="layout-page">
				<!-- Navbar -->
				<nav 
					class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
					id="layout-navbar"
					>
					<div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
						<a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
						<i class="bx bx-menu bx-sm"></i>
						</a>
					</div>
					<div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
						<!-- Search -->
						<div class="navbar-nav align-items-center">
							<div class="nav-item d-flex align-items-center">
								<i class="bx bx-search fs-4 lh-0"></i>
								<input
									type="text"
									class="form-control border-0 shadow-none"
									placeholder="Search..."
									aria-label="Search..."
									/>
							</div>
						</div>
						<!-- /Search -->
						<ul class="navbar-nav flex-row align-items-center ms-auto">
							<!-- Place this tag where you want the button to render. -->
							<!--Disply Time-->
							<span id="live_time" class="badge bg-label-primary rounded-pill" style="font-size: 16px;">Updating</span>
							<script>
								setInterval(myTimer, 1000);
								
								function myTimer() {
								const ddd = new Date();
								document.getElementById("live_time").innerHTML = ddd.toLocaleTimeString();
								}
							</script>
							<li class="nav-item lh-1 me-3">
							</li>
							<!-- User -->
							<script>
								function themic (){
									if(document.getElementById("theme").href.includes("dark")){
										document.getElementById("core").href = "assets/vendor/css/core.css"
										document.getElementById("theme").href = "assets/vendor/css/theme-default.css"
										localStorage.setItem("theme","light")
									} else{
										document.getElementById("core").href = "assets/vendor/css/core-dark.css"
										document.getElementById("theme").href = "assets/vendor/css/theme-default-dark.css"
										document.getElementById("swd").href = "assets/css/dark.css"
										localStorage.setItem("theme","dark")
									}
								}
										
							</script>
							<li class="nav-item me-2 me-xl-0">
								<a class="nav-link style-switcher-toggle hide-arrow" href="javascript:void(0);" onclick="themic()" data-bs-original-title="" title="">
								<i class="bx bx-sm bx-sun"></i>
								</a>
							</li>
							<li class="nav-item navbar-dropdown dropdown-user dropdown">
								<a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
									<div class="avatar avatar-online">
										<img id="dp" src="assets/img/icons/1.png" alt class="w-px-60 h-auto rounded-circle" />
									</div>
								</a>
								<ul class="dropdown-menu dropdown-menu-end">
									<li>
										<a class="dropdown-item" href="#">
											<div class="d-flex">
												<div class="flex-shrink-0 me-3">
													<div class="avatar avatar-online">
														<img id="dp2"src="assets/img/icons/1.png" alt class="w-px-40 h-auto rounded-circle" />
													</div>
												</div>
												<div class="flex-grow-1">
													<span id="name2" class="fw-semibold d-block">Loading..</span>
													<small class="text-muted">Admin</small>
												</div>
											</div>
										</a>
									</li>
									<li>
										<div class="dropdown-divider"></div>
									</li>
									<li>
										<a class="dropdown-item" href="edit-profile">
										<i class="bx bxs-user me-2"></i>
										<span class="align-middle">Edit Profile</span>
										</a>
									</li>
									<li>
										<a class="dropdown-item" href="account-settings">
										<i class="bx bxs-cog me-2"></i>
										<span class="align-middle">Account Settings</span>
										</a>
									</li>
									<li>
										<div class="dropdown-divider"></div>
									</li>
									<li>
										<a class="dropdown-item" id="logout" style="cursor: pointer;">
											<i class="bx bx-power-off me-2"></i>
											<script>
												document.getElementById("logout").onclick=function(){
													firebase.auth().signOut()
													  st.auth().signOut()
													  location.replace("/");
												};
											</script>
											<span class="align-middle">Log Out</span>
										</a>
									</li>
								</ul>
							</li>
							<!--/ User -->
						</ul>
					</div>
				</nav>
				<!-- / Navbar -->
				<div class="content-wrapper">
					<!-- Content -->
					<div class="container-xxl flex-grow-1 container-p-y">
						<!-- Users Table -->
						<div class="card">
							<h5 class="card-header">All Students</h5>
							<div style="overflow: auto;">
								<table id="studentsTable" class="table table-striped table-bordered nowrap" cellspacing="0" width="100%">
									<thead>
										<tr>
											<th>ID</th>
											<th>First Name</th>
											<th>Last Name</th>
											<th>Gender</th>
											<th>Birthday</th>
											<th>Year</th>
											<th>Stream</th>
											<th>Phone</th>
											<th>Status</th>
											<th>Actions</th>
										</tr>
									</thead>
									<tbody class="table-border-bottom-0">
									</tbody>
								</table>
							</div>
						</div>
						<!--/ Basic Bootstrap Table -->
					</div>
					<!-- / Content -->
					<div class="content-backdrop fade"></div>
				</div>
				<footer class="content-footer footer bg-footer-theme">
					<div class="container-fluid d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
						<div class="mb-2 mb-md-0">
							&copy; Copyright
							<script>
								document.write(new Date().getFullYear());
							</script>
							, Made with ❤️ by
							<a href="https://themeselection.com" target="_blank" class="footer-link fw-bolder">Nadeeja Kalhara & Chandira Anupama</a>
						</div>
						<div>
							<a href="https://themeselection.com/license/" class="footer-link me-4" target="_blank">License</a>
							<a href="https://themeselection.com/" target="_blank" class="footer-link me-4">More Themes</a>
							<a
								href="https://themeselection.com/demo/sneat-bootstrap-html-admin-template/documentation/"
								target="_blank"
								class="footer-link me-4"
								>Documentation</a
								>
							<a
								href="https://github.com/themeselection/sneat-html-admin-template-free/issues"
								target="_blank"
								class="footer-link me-4"
								>Support</a
								>
						</div>
					</div>
				</footer>
				<!-- / Layout page -->
			</div>
			<!-- Overlay -->
			<div class="layout-overlay layout-menu-toggle"></div>
		</div>
		<!-- / Layout wrapper -->
		<!-- Core JS -->
		<!-- build:js assets/vendor/js/core.js -->
		<script src="assets/vendor/libs/popper/popper.js"></script>
		<script src="assets/vendor/js/bootstrap.js"></script>
		<script src="assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
		<script src="assets/vendor/js/menu.js"></script>
		<!-- endbuild -->
		<!-- Vendors JS -->
		<!-- Main JS -->
		<script src="js/logged-out-redirect.js"></script>
		<script src="assets/js/main.js"></script>
		<script src="js/setclasslist.js"></script>
        <script>
			Swal.fire({
				title: 'Please Wait...',
				icon: 'info',
				showConfirmButton: false
			})

			// Set Index to Display Student ID
            let index = 0;

            // Retrieve a reference to the "students" node in Firebase
            var studentsRef = firebase.database().ref("students");
          
            // Attach a listener to the reference to retrieve the data when it changes
            studentsRef.on("value", function(snapshot) {
              // Clear the existing rows from the table body
              var tbody = document.getElementById("studentsTable").getElementsByTagName("tbody")[0];
              tbody.innerHTML = "";
          
              // Iterate over the students data and add a row to the table for each student
              snapshot.forEach(function(childSnapshot) {
                // Get the student data from the child snapshot
                var student = childSnapshot.val();
                console.log(student)
                index = index +1
          
                // Create a new row element
                var row = document.createElement("tr");
                // Set ID Attribute
                row.setAttribute('id', index);
          
                // Add the first name, last name, gender, birthday, and email to the row
                var studentIdCell = document.createElement("td");
				studentIdCell.setAttribute('id', 'id-'+parseInt(student.pn));
                studentIdCell.textContent = "RE"+("000" + index).slice(-4);
                row.appendChild(studentIdCell);
                
                // var pictureCell = document.createElement("td");
                // if(student.dp == null) {
                //     imageURL = "assets/img/icons/1.png"
                // } else {
                //     imageURL = student.dp
                // }
                // pictureCell.innerHTML = '<img src="' + imageURL +'" alt="Avatar" class="rounded-circle" style="width: 35%; border: solid 1px;">';
                // row.appendChild(pictureCell);

                var firstNameCell = document.createElement("td");
                firstNameCell.setAttribute('id', 'fn-'+parseInt(student.pn));
                firstNameCell.textContent = student.fn;
                row.appendChild(firstNameCell);
          
                var lastNameCell = document.createElement("td");
                lastNameCell.setAttribute('id', 'ln-'+parseInt(student.pn));
                lastNameCell.textContent = student.ln;
                row.appendChild(lastNameCell);
          
                var genderCell = document.createElement("td");
                genderCell.setAttribute('id', 'gn-'+parseInt(student.pn));
                genderCell.textContent = student.gn;
                row.appendChild(genderCell);

                var birthdayCell = document.createElement("td");
                birthdayCell.setAttribute('id', 'bd-'+parseInt(student.pn));
                birthdayCell.textContent = student.bd;
                row.appendChild(birthdayCell);

                var streamCell = document.createElement("td");
                streamCell.setAttribute('id', 'st-'+parseInt(student.pn));
                streamCell.textContent = student.st;
                row.appendChild(streamCell);

                var examYearCell = document.createElement("td");
                examYearCell.setAttribute('id', 'yr-'+parseInt(student.pn));
                examYearCell.textContent = student.yr;
                row.appendChild(examYearCell);

                var phoneNumberCell = document.createElement("td");
                phoneNumberCell.setAttribute('id', 'pn-'+parseInt(student.pn));
                phoneNumberCell.textContent = parseInt(student.pn);
                row.appendChild(phoneNumberCell);

				var statusCell = document.createElement("td");
                statusCell.setAttribute('id', 'status-'+parseInt(student.pn));
                statusCell.innerHTML = '<span class="badge bg-success me-1">Active</span>'
                row.appendChild(statusCell);
          
                // Add an action button to the row with the student's phone number as the ID
                var actionCell = document.createElement("td");
                var actionButton = document.createElement("button");
                var actionButton2 = document.createElement("button");
                var actionButton3 = document.createElement("button");
                var actionButton4 = document.createElement("button");
                var actionButton5 = document.createElement("button");

                actionButton.textContent = "View";
                actionButton2.textContent = "Ban";
                actionButton3.textContent = "Unban";
                actionButton4.textContent = "Enroll";

                actionButton.setAttribute("id", parseInt(student.pn));
                actionButton.setAttribute("onclick", 'view('+parseInt(student.pn)+')');
                actionButton.setAttribute("class", "btn btn-sm btn-primary margin-r-5");

                actionButton2.setAttribute("id", 'ban-'+parseInt(student.pn));
                actionButton2.setAttribute("onclick", 'ban('+parseInt(student.pn)+')');
                actionButton2.setAttribute("class", "btn btn-sm btn-danger margin-r-5");

				actionButton3.setAttribute("id", 'unban-'+parseInt(student.pn));
                actionButton3.setAttribute("onclick", 'unban('+parseInt(student.pn)+')');
                actionButton3.setAttribute("class", "btn btn-sm btn-danger margin-r-5");
                actionButton3.setAttribute("style", "display: none");

                actionButton4.setAttribute("onclick", 'enrollments('+parseInt(student.pn)+')');
                actionButton4.setAttribute("class", "btn btn-sm btn-dark");

                actionCell.appendChild(actionButton);
                actionCell.appendChild(actionButton2);
                actionCell.appendChild(actionButton3);
                actionCell.appendChild(actionButton4);
                row.appendChild(actionCell);
          
                // Add the row to the table body
                tbody.appendChild(row);
              });
            });
          </script>
		  <script>
            // Retrieve a reference to the "banned" node in Firebase
            var bannedRef = firebase.database().ref("banned");

            // Attach a listener to the reference to retrieve the data when it changes
            bannedRef.on("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot) {
                // Get the student data from the child snapshot
                var banned = childSnapshot.val();
                console.log(parseInt(banned.pn))
				document.getElementById('status-'+parseInt(banned.pn)).innerHTML = '<span class="badge bg-danger me-1">Banned</span>'
				document.getElementById('ban-'+parseInt(banned.pn)).style.display = 'none'
				document.getElementById('unban-'+parseInt(banned.pn)).style.display = 'inline'
                })
				swal.close()
            })
        </script>
		<script>
			function view(phoneNb){
				var pnWithZero = phoneNb
				var studentIdVal = document.getElementById('id-'+pnWithZero).innerText
				var studentId = parseInt(studentIdVal.slice(2))
				console.log(studentId)

				var studentDataRef = firebase.database().ref('students/' + studentId);
				studentDataRef.on('value', (snapshot) => {
				const dataReceived = snapshot.val();
				if(dataReceived!=null){
					console.log(dataReceived)

					// Set Data Lists
					var nameInput = '<div class="mb-2 row" style="width: 100%"><label for="html5-text-input" class="col-md-2 col-form-label">Name</label><div class="col-md-10"><input class="form-control" disabled value="'+ dataReceived.fn + ' ' +dataReceived.ln +'" id="studentName"></div></div>'
					var genderInput = '<div class="mb-2 row" style="width: 100%"><label for="html5-text-input" class="col-md-2 col-form-label">Gender</label><div class="col-md-10"><input class="form-control" disabled value="'+ dataReceived.gn +'" id="studentGender"></div></div>'
					var addressInput = '<div class="mb-2 row" style="width: 100%"><label for="html5-text-input" class="col-md-2 col-form-label">Addres</label><div class="col-md-10"><input class="form-control" disabled value="'+ dataReceived.ad +'" id="studentAddress"></div></div>'
					var birthdayInput = '<div class="mb-2 row" style="width: 100%"><label for="html5-text-input" class="col-md-2 col-form-label">Birth</label><div class="col-md-10"><input class="form-control" disabled value="'+ dataReceived.bd +'" id="studentBirthday"></div></div>'
					var phoneInput = '<div class="mb-2 row" style="width: 100%"><label for="html5-text-input" class="col-md-2 col-form-label">Phone</label><div class="col-md-10"><input class="form-control" disabled value="'+ dataReceived.pn +'" id="studentPhone"></div></div>'
					var whatsAppInput = '<div class="mb-2 row" style="width: 100%"><label for="html5-text-input" class="col-md-2 col-form-label">WA</label><div class="col-md-10"><input class="form-control" disabled value="'+ dataReceived.wa +'" id="studentWhatsApp"></div></div>'
					var examInput = '<div class="mb-2 row" style="width: 100%"><label for="html5-text-input" class="col-md-2 col-form-label">Exam</label><div class="col-md-10"><input class="form-control" disabled value="'+ dataReceived.yr + ' ' + dataReceived.st +'" id="studentExam"></div></div>'
					var emailInput = '<div class="mb-2 row" style="width: 100%"><label for="html5-text-input" class="col-md-2 col-form-label">E-Mail</label><div class="col-md-10"><input class="form-control" disabled value="'+ dataReceived.em +'" id="studentEmail"></div></div>'
					var passInput = '<div class="mb-2 row" style="width: 100%"><label for="html5-text-input" class="col-md-2 col-form-label">Pass</label><div class="col-md-10"><input class="form-control" disabled value="'+ dataReceived.pw +'" id="studentPassword"></div></div>'

					Swal.fire({
					title: 'Student Information: ' + studentIdVal + '\n' + dataReceived.fn + ' ' + dataReceived.ln,
					html: nameInput + '\n' + genderInput + '\n' + addressInput + '\n' +birthdayInput + '\n' + phoneInput + '\n' + whatsAppInput + '\n' + examInput + '\n' + emailInput + '\n' + passInput
					})

				} else {
					Swal.fire({
					title: 'An Error Occured!',
					icon: 'error',
					text: 'Student Data could not be fetched'
					})
				}
				});
			}

			function ban(phoneNb){
				var pnWithZero = phoneNb
				var studentIdVal = document.getElementById('id-'+pnWithZero).innerText
				var studentId = parseInt(studentIdVal.slice(2))
				var studentEmail = '0' + pnWithZero + '@englishre.xyz'
				console.log(studentEmail)

				Swal.fire({
					title: 'Are you sure?',
					text: "This Student will not be able to use this platform until you unban!",
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Confirm'
					}).then((result) => {
						if (result.isConfirmed) {
							Swal.fire({
								icon: "info",
								title: "Updating...",
								showConfirmButton:false,
								allowEscapeKey:false,
								allowOutsideClick:false,
								allowEnterKey:false
							})
							studentID = studentId
							email = studentEmail
							stuPhoneNumber = pnWithZero
							const url = "https://server-09.englishre.xyz/banstudent"; // Replace with the server URL
							const xhr = new XMLHttpRequest();
							xhr.open("POST", url);
							xhr.setRequestHeader("Content-Type", "application/json");
							xhr.onload = () => {
								if (xhr.status === 200) {
									firebase.database().ref('banned/' + studentID).set({
										isBanned: true,
										pn: '0'+stuPhoneNumber
									})
									.then(() => {
										Swal.fire({
											title: 'Student Banned Successfully',
											icon: 'success',
											text: 'Student ' + studentIdVal + ' banned successfully!'
										})
									})
									.catch((error) => {
										Swal.fire({
											title: 'Error Updating Database',
											icon: 'error',
											text: 'Student ' + studentIdVal + ' banned successfully!\nAn Error occured while updating Database'
										})
									});
								} else {
									Swal.fire({
										title: 'An Error Occured!',
										icon: 'error',
										text: xhr.statusText
									})
									Swal.fire({
										title: 'An Error Occured',
										icon: 'info',
										text: xhr.statusText,
										confirmButtonText: 'Close',
									})
									console.error(xhr.statusText);
								}
							};
							xhr.onerror = () => {
								Swal.fire({
									title: 'An Error Occured',
									icon: 'info',
									text: xhr.statusText,
									confirmButtonText: 'Close',
								})
								console.error(xhr.statusText);
							};
							xhr.send(JSON.stringify({ email }));
						}
					})
			}
			
			function unban(phoneNb){
				var pnWithZero = phoneNb
				var studentIdVal = document.getElementById('id-'+pnWithZero).innerText
				var studentId = parseInt(studentIdVal.slice(2))
				var studentEmail = '0' + pnWithZero + '@englishre.xyz'
				console.log(studentEmail)

				Swal.fire({
					title: 'Are you sure?',
					text: "This Student will be able to use this platform again!",
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Confirm'
					}).then((result) => {
						if (result.isConfirmed) {
							Swal.fire({
								icon: "info",
								title: "Updating...",
								showConfirmButton:false,
								allowEscapeKey:false,
								allowOutsideClick:false,
								allowEnterKey:false
							})
							studentID = studentId
							email = studentEmail
							stuPhoneNumber = pnWithZero
							const url = "https://server-09.englishre.xyz/unbanstudent"; // Replace with the server URL
							const xhr = new XMLHttpRequest();
							xhr.open("POST", url);
							xhr.setRequestHeader("Content-Type", "application/json");
							xhr.onload = () => {
								if (xhr.status === 200) {
									firebase.database().ref('banned/' + studentID).remove()
									.then(() => {
										Swal.fire({
											title: 'Student Unbanned Successfully',
											icon: 'success',
											text: 'Student ' + studentIdVal + ' unbanned successfully!'
										}).then((result) => {
											if (result.isConfirmed) {
												location.reload()
											}
											else if (result.isDismissed) {
												location.reload()
											}
										})
									})
									.catch((error) => {
										Swal.fire({
											title: 'Error Updating Database',
											icon: 'error',
											text: 'Student ' + studentIdVal + ' unbanned successfully!\nAn Error occured while updating Database'
										})
									});
								} else {
									Swal.fire({
										title: 'An Error Occured',
										icon: 'info',
										text: xhr.statusText,
										confirmButtonText: 'Close',
									})
									console.error(xhr.statusText);
								}
							};
							xhr.onerror = () => {
								Swal.fire({
									title: 'An Error Occured',
									icon: 'info',
									text: xhr.statusText,
									confirmButtonText: 'Close',
								})
								console.error(xhr.statusText);
							};
							xhr.send(JSON.stringify({ email }));
						}
					})
			}
		</script>
		<script>
			function enrollments(phoneNb) {
				
				Swal.fire({
					title: 'Please Wait...',
					icon: 'info',
					showConfirmButton: false
				})

				
				const email = '0'+phoneNb+'@englishre.xyz'; // Replace with the user's email address
				console.log(email)
				const url = "https://server-02.englishre.xyz/getuserid"; // Replace with the server URL
				const xhr = new XMLHttpRequest();
				xhr.open("POST", url);
				xhr.setRequestHeader("Content-Type", "application/json");
				xhr.onload = () => {
					if (xhr.status === 200) {
					console.log(xhr.responseText);
					} else {
						var systemID = xhr.statusText;
						console.log(systemID);
						var enrollmentRef = firebase.database().ref('enroll/' + systemID);
						enrollmentRef.on('value', (snapshot) => {
							const enrollment = snapshot.val();
							console.log(enrollment)
						})
					}
				};
				xhr.onerror = () => {
					console.error(xhr.statusText);
				};
				xhr.send(JSON.stringify({ email }));
			}
		</script>
		
<style>
	input {
border: #8070d4;
	}
	    th, td { white-space: nowrap; }
    div.dataTables_wrapper {
        width: 800px;
        margin: 0 auto;
    }
</style>
		<!-- Page JS -->
		<!-- Place this tag in your head or just before your close body tag. -->
		<script async defer src="https://buttons.github.io/buttons.js"></script>
	<!-- Code injected by live-server -->
</body>
</html>